@echo off
chcp 65001 >nul
title 🚀 Запуск сайта с доступом из локальной сети

echo.
echo ═══════════════════════════════════════════════════════════
echo  🎵 САЙТ МУЗЫКАЛЬНОГО РУКОВОДИТЕЛЯ
echo  📡 Запуск с доступом из локальной сети
echo ═══════════════════════════════════════════════════════════
echo.

echo [1/3] 📋 Проверка зависимостей...
if not exist "node_modules\" (
    echo ⚠️  Зависимости не установлены! Устанавливаю...
    call npm install
    if errorlevel 1 (
        echo ❌ Ошибка установки зависимостей!
        pause
        exit /b 1
    )
) else (
    echo ✅ Зависимости найдены
)

echo.
echo [2/3] 🔍 Определение IP-адреса компьютера...
echo.
echo 📍 Ваш IP-адрес в локальной сети:
echo ─────────────────────────────────────────────────────────
for /f "tokens=2 delims=:" %%a in ('ipconfig ^| findstr /c:"IPv4"') do (
    set IP=%%a
    set IP=!IP: =!
    echo    http://%%a:5173
)
echo ─────────────────────────────────────────────────────────
echo.
echo 💡 Используйте этот адрес на других устройствах
echo    (телефон, планшет, другой ПК)
echo.
echo ⚠️  ВАЖНО: Все устройства должны быть в одной Wi-Fi сети!
echo.

echo [3/3] 🚀 Запуск сервера разработки...
echo.
echo ═══════════════════════════════════════════════════════════
echo  Сайт запускается...
echo  После запуска можно открыть на любом устройстве в сети
echo ═══════════════════════════════════════════════════════════
echo.

npm run dev:client

pause
