#!/bin/bash

echo "==============================================="
echo "  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∞–π—Ç–∞ –º—É–∑—ã–∫–∞–ª—å–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è"
echo "==============================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ Node.js..."
if ! command -v node &> /dev/null; then
    echo "‚ùå Node.js –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!"
    echo ""
    echo "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js –æ–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤:"
    echo ""
    echo "macOS (—á–µ—Ä–µ–∑ Homebrew):"
    echo "  brew install node"
    echo ""
    echo "Linux (Ubuntu/Debian):"
    echo "  curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -"
    echo "  sudo apt-get install -y nodejs"
    echo ""
    echo "–ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å https://nodejs.org/"
    exit 1
fi

echo "‚úÖ Node.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
node --version
echo ""

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo "üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
echo "–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç..."
npm install
if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"
    exit 1
fi
echo ""

# –°–æ–∑–¥–∞–Ω–∏–µ –ë–î
echo "üóÑÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..."
npm run setup
if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"
    exit 1
fi
echo ""

echo "==============================================="
echo "  ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
echo "==============================================="
echo ""
echo "–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∞–π—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:"
echo "  npm run dev"
echo ""
echo "–ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª: ./start-mac-linux.sh"
echo ""
echo "–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:"
echo "  - –ö–ª–∏–∫–Ω–∏—Ç–µ 3 —Ä–∞–∑–∞ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø"
echo "  - –ü–∞—Ä–æ–ª—å: admin"
echo ""
